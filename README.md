# Lottery

## 前言

本项目基于 [参考链接](https://github.com/henry-fun/hanshan-lottery) 进行重构和功能扩展。相比原项目，新增了权重设置、Excel 名单导入、奖项自定义等功能，整体交互和界面体验也做了优化，适用于年会、聚会等多种抽奖场景。

## 项目简介

本项目是一个基于 Vue 3 的抽奖系统，支持权重抽奖、名单导入、奖项设置、中奖名单展示等功能，适用于年会、聚会等场景。项目注重交互体验和可扩展性，支持自定义奖项、批量权重设置、实时保存等。

### 技术栈

- **Vue 3**：主流前端框架，响应式开发。
- **Ant Design Vue**：UI 组件库，提供美观的表格、弹窗、按钮等。
- **Pinia**：状态管理。
- **Vue Router**：页面路由。
- **Vite**：前端构建工具，极速开发体验。
- **ExcelJS / xlsx**：Excel 文件导入导出。
- **动画与样式**：自定义 CSS + animate.css，丰富的动画和视觉效果。

### 主要功能

- 支持 Excel 导入抽奖名单/导出中奖名单，导入礼物名单，自动设置默认权重。
- Excel 导入支持全区域拖拽上传，自动提取嵌入图片，预览表格内容（图片、文字、数字、空值）均居中显示，导入说明区域优化。
- 头像逻辑全面升级：所有头像均由导入表格数据决定，优先显示图片，无图片时显示唯一头像字（avatarChar），所有页面头像渲染逻辑统一。
- 权重编辑弹窗（Modal + Table），可批量设置、重置权重。
- 权重抽奖算法，权重越高中奖概率越大，权重为0不参与抽奖。
- 奖项自定义与奖品展示，奖项设置说明区域样式全局统一。
- 中奖名单、中奖结果弹窗、主页面头像渲染逻辑统一，体验一致。
- 中奖名单实时展示。
- 雪花等节日特效。
- 音乐控制、全屏 loading、键盘快捷键操作。
- 响应式设计，适配不同屏幕。
- 数据实时本地存储，刷新不丢失。（当前刷新是清空所有数据的， 待确定是否要清空）

### 特色亮点

- 权重抽奖：支持每个人每个奖项独立权重，概率灵活可控。
- 批量操作：一键重置/设置权重，提升效率。
- 交互友好：动画丰富，操作流畅，UI 现代美观。
- 扩展性强：奖项、奖品、名单均可自定义。

### Todo

- 导入礼物名单，奖项设置需要和展示的礼物名单相关联（奖项设置要多加一个level字段？？？）但是新增奖项的话没有图片也使用随机名称的某个字

1、添加奖项之后要去设置 礼物 ？ 比如新增一个4等级，奖品有a,b,c。此时就需要去添加对应等级的礼物。如果默认不添加就是直接取当前的奖项名称？？？
2、奖项的个数需要和礼物的个数一致？？？ giftLevelMap也要动态更新获取？？？
3、比如纪念奖抽完了，我需要添加个数，然后是不是应该也要对 对应的等级礼物进行设置，比如要对那个奖品添加个数，然后抽出的奖项必定是设置的这个礼物，如果不设置就默认在对应等级的礼物随机取

- 添加礼物管理功能，可新增删除（这里要添加的数据结构应该就是按照模板的字段）

- 中奖结果添加中奖奖项显示，因为按照当前的逻辑数据，奖项的奖品不一致，所以不知道获得的是哪一个奖品, 如果没有对应的礼物就直接去奖项的名称

- 雪花特效
